(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{144:function(a,t,s){"use strict";s.r(t);var r=s(0),n=Object(r.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"加载文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载文件"}},[a._v("#")]),a._v(" 加载文件")]),a._v(" "),s("h2",{attrs:{id:"加载avro文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载avro文件"}},[a._v("#")]),a._v(" 加载avro文件")]),a._v(" "),s("h3",{attrs:{id:"创建hive表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建hive表"}},[a._v("#")]),a._v(" 创建hive表")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" EXTERNAL "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("TABLE")]),a._v(" temp_carinfo partitioned "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("by")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("day_id string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" hr string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ROW")]),a._v(" FORMAT SERDE "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'org.apache.hadoop.hive.serde2.avro.AvroSerDe'")]),a._v(" \nSTORED "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("AS")]),a._v(" INPUTFORMAT "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat'")]),a._v("\nOUTPUTFORMAT "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat'")]),a._v(" \nLOCATION "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/project/pq_auto_analysis_bj_sh/pq_auto_analysis_bj_sh/IDataIn/carInfoAndLocation/mixture/carinfo/topics/pq_auto_analysis_bj_sh__replicator__carInfoAndLocation__autocar'")]),a._v(" TBLPROPERTIES "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'avro.schema.literal'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'{\n            "type": "record",\n            "name": "location",\n            "namespace": "com.iflytek.avro",\n            "fields": [\n                { "name":"log",  "type":"string"}\n            ]\n       }\'')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("ol",[s("li",[a._v("需要定义SERDE")]),a._v(" "),s("li",[a._v("需要定义avro数据schema")])]),a._v(" "),s("h3",{attrs:{id:"加载partition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载partition"}},[a._v("#")]),a._v(" 加载partition")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("alter")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("table")]),a._v(" temp_carinfo "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("partition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("day_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'20190616'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" hr "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'08'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" \nlocation "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/project/pq_auto_analysis_bj_sh/pq_auto_analysis_bj_sh/IDataIn/carInfoAndLocation/mixture/carinfo/topics/pq_auto_analysis_bj_sh__replicator__carInfoAndLocation__autocar/20190616/08'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h2",{attrs:{id:"加载json文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载json文件"}},[a._v("#")]),a._v(" 加载json文件")])])}),[],!1,null,null,null);t.default=n.exports}}]);